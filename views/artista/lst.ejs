<%- include('../cabecalho.ejs') %>
    <div style="margin-bottom: 16px;">
        <a href="/artes/lst" style="text-decoration: none; color: #007bff; font-weight: bold;">ðŸŽ¨ Gerenciar Artes</a>
    </div>
    <h1>Gerenciar Perfis</h1>
    <form method="get" action="/artista/lst" style="margin-bottom: 16px;">
        <input type="text" name="busca" placeholder="Pesquisar por Artista ou Arte"
            value="<%= typeof busca !== 'undefined' ? busca : '' %>">
        <button type="submit">Buscar</button>
    </form>
    <a href="/artista/add">+ Novo(a) Artista</a>
    <table>
        <tr>
            <td>Perfil</td>
            <td>Artes</td>
            <td>Artista</td>
            <td>Data de Nascimento</td>
            <td>AÃ§Ãµes</td>
        </tr>
        <% if (Musicas.length===0) { %>
            <tr>
                <td colspan="5">nada foi encontrado, verifique se digitou corretamente</td>
            </tr>
            <% } else { %>
                <% for (const m of Musicas) { %>
                    <tr>
                        <td>
                            <% if (m.perfil) { %>
                                <img src="<%= m.perfil %>" alt="perfil" style="width:80px; height:auto" onerror="this.src='/img/user-placeholder.svg'">
                                <% } %>
                        </td>
                        <td>
                            <% if (m.artes && m.artes.length > 0) { %>
                                <% m.artes.forEach((arte, index) => { %>
                                    <span style="display: inline-block; background: #667eea; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 4px; margin-bottom: 4px;">
                                        <%= arte %>
                                    </span>
                                <% }) %>
                            <% } else { %>
                                <span style="color: #999; font-style: italic;">Nenhuma arte</span>
                            <% } %>
                        </td>
                        <td>
                            <%= m.artista %>
                        </td>
                        <td>
                            <% if (m.dataNascimento) { %>
                                <%= new Date(m.dataNascimento).toLocaleDateString('pt-BR') %>
                            <% } else if (m.idade) { %>
                                <%= m.idade %> anos
                            <% } else { %>
                                -
                            <% } %>
                        </td>
                        <td>
                            <a href="/artista/edt/<%= m._id %>" class="btn edit"><i class="fa fa-pen"></i> Editar</a>
                            <a href="/artista/del/<%= m._id %>" class="btn delete"><i class="fa fa-trash"></i> Excluir</a>
                        </td>
                    </tr>
                    <% } %>
                        <% } %>
    </table>
    <%- include('../rodape.ejs') %>