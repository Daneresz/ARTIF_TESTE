<%- include('../../admin-matrix-header.ejs') %>

        <div class="admin-header" style="margin-bottom: 40px;">
            <h1>‚úèÔ∏è EDITAR COMUNIDADE</h1>
            <p class="subtitle">> Update Community Interface</p>
        </div>

        <div style="max-width: 600px; margin: 0 auto;">
            <a href="/admin/comunidades/lst" class="btn" style="margin-bottom: 20px;">‚Üê Voltar √†s Comunidades</a>
            
            <% if (erro) { %>
                <div style="color: #ff0000; margin-bottom: 16px; padding: 10px; background-color: rgba(255,0,0,0.2); border: 2px solid #ff0000; font-family: 'Courier New'; font-weight: bold;">
                    ‚úó <%= erro %>
                </div>
            <% } %>
            
            <form method="post" enctype="multipart/form-data" class="admin-form">
                <div class="form-group">
                    <label>üë• Nome da Comunidade:</label>
                    <input type="text" name="nome" value="<%= Comunidade.nome %>" required>
                </div>
                
                <div class="form-group">
                    <label>üìù Descri√ß√£o:</label>
                    <textarea name="descricao" required style="background: #000; color: #00ff00; border: 2px solid #00ff00; padding: 10px; font-family: 'Courier New'; font-weight: bold; resize: none; height: 100px;"><%= Comunidade.descricao %></textarea>
                </div>
                
                <div class="form-group">
                    <label>üé® Arte:</label>
                    <select name="arte" required style="background: #000; color: #00ff00; border: 2px solid #00ff00; padding: 10px; font-family: 'Courier New'; font-weight: bold;">
                        <option value="">Selecione uma arte</option>
                        <% Artes.forEach(arte => { %>
                            <option value="<%= arte.titulo %>" <%= Comunidade.arte === arte.titulo ? 'selected' : '' %>>
                                <%= arte.titulo %>
                            </option>
                        <% }) %>
                    </select>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <a href="/admin/comunidades/lst" class="btn" style="flex: 1; text-align: center;">Cancelar</a>
                    <button type="submit" class="btn" style="flex: 1;">‚úì Atualizar</button>
                </div>
            </form>
        </div>

    <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #ddd;">
        <h2>Posts da Comunidade</h2>
        <% if (posts && posts.length > 0) { %>
            <% posts.forEach(post => { %>
                <div style="background: white; border: 1px solid #ddd; border-radius: 4px; padding: 15px; margin-bottom: 15px;">
                    <div style="font-weight: 600; margin-bottom: 8px;">
                        <% if (post.artistaDeletado) { %>
                            üë§ Usu√°rio Deletado
                        <% } else { %>
                            <%= post.artista %>
                        <% } %>
                    </div>
                    <div style="color: #555; margin-bottom: 10px;">
                        <%= post.descricao %>
                    </div>
                    <% if (post.imagem) { %>
                        <img src="<%= post.imagem %>" style="max-width: 100%; max-height: 300px; margin-bottom: 10px; border-radius: 4px;">
                    <% } %>
                    <a href="#" class="btn delete" onclick="event.preventDefault(); openGlobalConfirm('/admin/comunidades/edt/<%= Comunidade._id %>/post/<%= post._id %>/del', 'Tem certeza que deseja deletar este post?')">Deletar</a>
                </div>
            <% }) %>
        <% } else { %>
            <p style="color: #999;">Nenhum post nesta comunidade ainda.</p>
        <% } %>
    </div>

    <%- include('../../rodape.ejs') %>
